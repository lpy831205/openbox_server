import{_ as Ie,r as u,o as je,O as Me,c as d,d as Z,e as w,g as a,w as l,n as o,t as p,f as i,k as U,q as Je,a0 as ae,Y as Ze,S as Ke,p as P,U as Qe,a1 as Ye,j as me,K as ge,L as _e,M as _,E as r,$ as Ge,a2 as K}from"./index-IjbujgFK.js";import"./crypto-wasm-7Ru5Q_sa.js";const He={class:"admin-container"},We={class:"action-buttons"},Xe={class:"card-header"},et={class:"header-buttons"},tt={class:"pagination"},at={class:"card-header"},lt={class:"card-header"},st={class:"card-header"},nt={class:"read-count"},ot={class:"action-buttons"},rt={class:"pagination"},it={class:"dialog-footer"},ut={class:"dialog-footer"},dt={key:0,class:"notification-info"},ct={class:"notification-meta"},pt={class:"notification-sender"},ft={class:"notification-time"},mt={class:"notification-recipients"},gt={class:"notification-content"},_t={class:"notification-read-status"},vt={__name:"Admin",setup(yt){const V=u("users"),le=e=>{e==="users"?W():e==="logs"?R():e==="monitor"?ue():e==="notifications"&&z()},Q=u([]),S=u([{timestamp:new Date,account:"admin",ip:"192.168.1.100",action:"查询",query:"姓名:张三",result_count:5},{timestamp:new Date(Date.now()-24*60*60*1e3),account:"user1",ip:"192.168.1.101",action:"导出",query:"班级:初一(1)班",result_count:42},{timestamp:new Date(Date.now()-48*60*60*1e3),account:"admin",ip:"192.168.1.100",action:"查询",query:"学号:20230001",result_count:1}]),O=u(1),E=u(10),A=u(3),h=u({cpuUsage:0,memoryUsage:0,diskUsage:0,uptime:"",online:!1,lastUpdate:null,cpuTemperature:0,memoryTotal:0,memoryUsed:0,diskTotal:0,diskUsed:0,cpuCores:0,loadAverage:[0,0,0],networkIn:0,networkOut:0}),Y=u([]),D=u(!1),N=u(!1),L=u(null),C=u({account:"",newPassword:""}),ve={newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/,message:"密码必须包含大小写字母和数字",trigger:"blur"}]},se=u([]),F=u(1),I=u(10),ne=u(0),B=u(!1),j=u(!1),G=u(!1),g=u(null),c=u({title:"",content:"",recipientType:"all",selectedUsers:[]}),ye={title:[{required:!0,message:"请输入通知标题",trigger:"blur"},{min:2,max:50,message:"标题长度应在2到50个字符之间",trigger:"blur"}],content:[{required:!0,message:"请输入通知内容",trigger:"blur"},{min:5,max:500,message:"内容长度应在5到500个字符之间",trigger:"blur"}],recipientType:[{required:!0,message:"请选择接收人类型",trigger:"change"}],selectedUsers:[{required:!0,message:"请选择至少一个用户",trigger:"change",validator:(e,t,n)=>{c.value.recipientType==="selected"&&(!t||t.length===0)?n(new Error("请选择至少一个用户")):n()}}]},H=u(null),oe=e=>e===100?"完成":`${e}%`,re=(e,t)=>{const n=e/t*100;return n===100?"success":n>50?"warning":""},W=async()=>{try{const e=await _.get("/api/admin/users/query");Q.value=e.data}catch(e){r.error("获取用户列表失败："+e.message)}},R=async()=>{try{const e=await _.get("/api/admin/logs",{params:{page:O.value,size:E.value}});console.log("查询日志响应:",e),e&&e.logs&&Array.isArray(e.logs)?(S.value=e.logs.map(t=>({...t,query:t.query?JSON.stringify(t.query):""})),A.value=e.logs.length):e&&Array.isArray(e)?(S.value=e.map(t=>({...t,query:t.query?JSON.stringify(t.query):""})),A.value=e.length):(console.error("查询日志数据格式不正确:",e),S.value=[],A.value=0)}catch(e){console.error("获取查询日志失败:",e),r.error("获取查询日志失败："+e.message),S.value=[],A.value=0}},ie=async()=>{try{const e=await _.get("/api/admin/system-status");e.data&&(h.value={cpuUsage:e.data.cpuUsage||0,memoryUsage:e.data.memoryUsage||0,diskUsage:e.data.diskUsage||0,uptime:e.data.uptime||"",online:e.data.online||!1,lastUpdate:e.data.lastUpdate||null,cpuTemperature:e.data.cpuTemperature||0,memoryTotal:e.data.memoryTotal||0,memoryUsed:e.data.memoryUsed||0,diskTotal:e.data.diskTotal||0,diskUsed:e.data.diskUsed||0,cpuCores:e.data.cpuCores||0,loadAverage:e.data.loadAverage||[0,0,0],networkIn:e.data.networkIn||0,networkOut:e.data.networkOut||0})}catch(e){r.error("获取系统状态失败："+e.message)}},X=async()=>{try{const e=await _.get("/api/admin/online-users");Y.value=e.data}catch(e){r.error("获取在线用户失败："+e.message)}},we=e=>{C.value.account=e.account,C.value.newPassword="",N.value=!0,Ge(()=>{L.value&&L.value.resetFields()})},be=async()=>{if(L.value)try{await L.value.validate(),D.value=!0,await _.post("/api/admin/reset-password",{account:C.value.account,new_password:C.value.newPassword}),r.success("密码重置成功"),N.value=!1}catch(e){e&&e.message?r.error("重置密码失败："+e.message):console.log("表单校验失败或API请求被取消/无消息错误:",e)}finally{D.value=!1}},he=async e=>{try{await K.confirm(`确定要删除用户 ${e.account} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.post("/api/admin/users/delete",{account:e.account}),r.success("用户删除成功"),W()}catch(t){t!=="cancel"&&r.error("删除用户失败："+t.message)}},ke=async()=>{try{r.info("正在准备导出日志，请稍候...");const e=await _.get("/api/admin/logs",{params:{page:1,size:1e3}});let t=[];if(e&&e.logs&&Array.isArray(e.logs))t=e.logs;else if(e&&Array.isArray(e))t=e;else throw new Error("获取日志数据失败，数据格式不正确");if(t.length===0){r.warning("没有日志数据可供导出");return}const n=["时间","操作账号","IP地址","操作类型","查询内容","结果数"],k=t.map(m=>[T(m.timestamp),m.account||"",m.ip||"",de(m.action)||"",typeof m.query=="object"?JSON.stringify(m.query):m.query||"",m.result_count?.toString()||"0"]);let v=n.join(",")+`
`;k.forEach(m=>{const M=m.map(y=>y.includes(",")||y.includes('"')||y.includes(`
`)?`"${y.replace(/"/g,'""')}"`:y);v+=M.join(",")+`
`});const f=new Blob(["\uFEFF"+v],{type:"text/csv;charset=utf-8;"}),b=document.createElement("a");b.href=window.URL.createObjectURL(f);const x=new Date().toISOString().split("T")[0];b.download=`系统查询日志_${x}.csv`,b.click(),window.URL.revokeObjectURL(b.href),r.success("日志导出成功")}catch(e){console.error("导出日志失败:",e),r.error("导出日志失败："+(e.message||"未知错误"))}},Ue=async()=>{try{await K.confirm("确定要清除所有查询日志吗？此操作不可恢复！","警告",{confirmButtonText:"确定清除",cancelButtonText:"取消",type:"warning",distinguishCancelAndClose:!0,closeOnClickModal:!1}),D.value=!0,r.info("正在清除日志，请稍候...");const e=await _.post("/api/admin/clear-logs",{log_type:"query"});await R(),r.success("日志清除成功")}catch(e){e!=="cancel"&&e!=="close"&&(console.error("清除日志失败:",e),r.error("清除日志失败："+(e.message||"未知错误")))}finally{D.value=!1}},Ce=async e=>{try{await K.confirm(`确定要强制用户 ${e.account} 下线吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.post("/api/admin/force-logout",{account:e.account}),r.success("用户已强制下线"),X()}catch(t){t!=="cancel"&&r.error("强制下线失败："+t.message)}},ue=()=>{ie(),X()},Te=e=>{E.value=e,R()},xe=e=>{O.value=e,R()},z=async()=>{try{const{page:e,page_size:t}={page:F.value,page_size:I.value},n=await _.get("/api/admin/notifications",{params:{page:e,page_size:t}});n.success?(se.value=n.notifications||[],ne.value=n.total||0):(console.error("获取通知列表失败:",n.message),r.error(n.message||"获取通知列表失败"))}catch(e){console.error("获取通知列表失败:",e),r.error("网络错误，请稍后重试")}},Ve=()=>{c.value.title="",c.value.content="",c.value.recipientType="all",c.value.selectedUsers=[],B.value=!0},ze=async()=>{H.value&&await H.value.validate(async e=>{if(e){j.value=!0;try{const t=c.value.recipientType==="all"?"all":c.value.selectedUsers;if(c.value.recipientType==="selected"&&(!t||t.length===0)){r.warning("请至少选择一个接收用户"),j.value=!1;return}const n=await _.post("/api/admin/notifications/send",{title:c.value.title,content:c.value.content,recipients:t});n.success?(r.success("通知发送成功"),B.value=!1,z()):r.error(n.message||"发送通知失败")}catch(t){console.error("发送通知失败:",t),r.error("网络错误，请稍后重试")}finally{j.value=!1}}})},qe=e=>{if(!e){console.error("通知数据不完整");return}g.value=e,G.value=!0},Pe=e=>{if(!e||!e.id){console.error("通知ID不存在"),r.error("通知数据不完整，无法删除");return}K.confirm("确定要删除该通知吗？此操作不可恢复。","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const t=await _.post("/api/admin/notifications/delete",{notification_id:e.id});t.success?(r.success("通知已删除"),z()):r.error(t.message||"删除通知失败")}catch(t){console.error("删除通知失败:",t),r.error("网络错误，请稍后重试")}}).catch(()=>{})},Se=e=>{I.value=e,z()},Ae=e=>{F.value=e,z()},De=e=>{switch(e){case"superadmin":return"danger";case"admin":return"warning";case"user":return"success";default:return"info"}},Ne=e=>{switch(e){case"superadmin":return"超级管理员";case"admin":return"管理员";case"user":return"普通用户";default:return e}},Le=e=>e?e.includes("login_success")||e.includes("success")?"success":e.includes("query")||e.includes("get_")?"info":e.includes("export")||e.includes("download")?"warning":e.includes("delete")||e.includes("remove")||e.includes("fail")||e.includes("error")?"danger":e.includes("add")||e.includes("create")||e.includes("insert")||e.includes("update")?"primary":"info":"info",de=e=>e?e==="login_success"?"登录成功":e==="login_fail"?"登录失败":e==="logout"?"登出":e==="query_students"?"查询学生":e==="get_login_records"?"查看登录记录":e==="get_system_status"?"查看系统状态":e==="get_admin_logs"?"查看管理日志":e==="admin_get_online_users"?"查看在线用户":e==="admin_export_logs_attempt"?"导出日志":e==="superadmin_get_blacklist_ips"?"查看黑名单":e==="superadmin_activate_admin"?"激活管理员":e==="superadmin_set_custom_role"?"设置角色":e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()):"未知操作",T=e=>e?new Date(e).toLocaleString():"";return je(async()=>{await W(),V.value==="logs"?await R():V.value==="monitor"?(await ie(),await X()):V.value==="notifications"&&await z()}),Me(()=>V.value,e=>{le(e)}),(e,t)=>{const n=d("el-table-column"),k=d("el-tag"),v=d("el-icon"),f=d("el-button"),b=d("el-table"),x=d("el-card"),m=d("el-tab-pane"),M=d("el-pagination"),y=d("el-progress"),J=d("el-descriptions-item"),Be=d("el-descriptions"),ce=d("el-col"),Re=d("el-row"),$e=d("el-tabs"),ee=d("el-input"),$=d("el-form-item"),pe=d("el-form"),te=d("el-dialog"),fe=d("el-radio"),Oe=d("el-radio-group"),Ee=d("el-option"),Fe=d("el-select");return w(),Z("div",He,[a($e,{modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=s=>V.value=s),class:"admin-tabs",onTabChange:le},{default:l(()=>[a(m,{label:"用户管理",name:"users"},{default:l(()=>[a(x,null,{header:l(()=>t[15]||(t[15]=[i("div",{class:"card-header"},[i("span",null,"用户列表")],-1)])),default:l(()=>[a(b,{data:Q.value,border:"",stripe:"",style:{width:"100%"}},{default:l(()=>[a(n,{prop:"account",label:"账号",width:"120"}),a(n,{prop:"role",label:"角色",width:"100"},{default:l(({row:s})=>[a(k,{type:De(s.role)},{default:l(()=>[o(p(Ne(s.role)),1)]),_:2},1032,["type"])]),_:1}),a(n,{prop:"deviceCode",label:"设备码","show-overflow-tooltip":""}),a(n,{prop:"registerTime",label:"注册时间",width:"180"},{default:l(({row:s})=>[o(p(T(s.registerTime)),1)]),_:1}),a(n,{prop:"lastLoginTime",label:"最后登录",width:"180"},{default:l(({row:s})=>[o(p(T(s.lastLoginTime)),1)]),_:1}),a(n,{label:"操作",width:"180",fixed:"right"},{default:l(({row:s})=>[i("div",We,[a(f,{size:"small",type:"primary",onClick:q=>we(s),class:"action-btn reset-btn"},{default:l(()=>[a(v,null,{default:l(()=>[a(U(Je))]),_:1}),t[16]||(t[16]=o(" 重置密码 "))]),_:2},1032,["onClick"]),a(f,{size:"small",type:"danger",onClick:q=>he(s),disabled:s.role==="admin",class:"action-btn"},{default:l(()=>[a(v,null,{default:l(()=>[a(U(ae))]),_:1}),t[17]||(t[17]=o(" 删除 "))]),_:2},1032,["onClick","disabled"])])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),a(m,{label:"查询日志",name:"logs"},{default:l(()=>[a(x,null,{header:l(()=>[i("div",Xe,[t[20]||(t[20]=i("span",null,"查询记录",-1)),i("div",et,[a(f,{type:"danger",onClick:Ue,class:"clear-btn"},{default:l(()=>[a(v,null,{default:l(()=>[a(U(ae))]),_:1}),t[18]||(t[18]=o(" 清除日志 "))]),_:1}),a(f,{type:"primary",onClick:ke,class:"export-btn"},{default:l(()=>[a(v,null,{default:l(()=>[a(U(Ze))]),_:1}),t[19]||(t[19]=o(" 导出日志 "))]),_:1})])])]),default:l(()=>[a(b,{data:S.value,border:"",stripe:"",style:{width:"100%"}},{default:l(()=>[a(n,{prop:"timestamp",label:"时间",width:"180"},{default:l(({row:s})=>[o(p(T(s.timestamp)),1)]),_:1}),a(n,{prop:"account",label:"操作账号",width:"120"}),a(n,{prop:"ip",label:"IP地址",width:"120"}),a(n,{prop:"action",label:"操作类型",width:"150"},{default:l(({row:s})=>[a(k,{type:Le(s.action)},{default:l(()=>[o(p(de(s.action)),1)]),_:2},1032,["type"])]),_:1}),a(n,{prop:"query",label:"查询内容","show-overflow-tooltip":""}),a(n,{prop:"result_count",label:"结果数",width:"80"})]),_:1},8,["data"]),i("div",tt,[a(M,{"current-page":O.value,"onUpdate:currentPage":t[0]||(t[0]=s=>O.value=s),"page-size":E.value,"onUpdate:pageSize":t[1]||(t[1]=s=>E.value=s),"page-sizes":[10,20,50,100],total:A.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Te,onCurrentChange:xe},null,8,["current-page","page-size","total"])])]),_:1})]),_:1}),a(m,{label:"系统监控",name:"monitor"},{default:l(()=>[a(Re,{gutter:20},{default:l(()=>[a(ce,{span:12},{default:l(()=>[a(x,{class:"monitor-card"},{header:l(()=>[i("div",at,[t[22]||(t[22]=i("span",null,"系统状态",-1)),a(f,{type:"primary",onClick:ue},{default:l(()=>[a(v,null,{default:l(()=>[a(U(Ke))]),_:1}),t[21]||(t[21]=o(" 刷新 "))]),_:1})])]),default:l(()=>[a(Be,{column:1,border:""},{default:l(()=>[a(J,{label:"CPU使用率"},{default:l(()=>[a(y,{percentage:h.value.cpuUsage,status:h.value.cpuUsage>80?"exception":""},null,8,["percentage","status"])]),_:1}),a(J,{label:"内存使用率"},{default:l(()=>[a(y,{percentage:h.value.memoryUsage,status:h.value.memoryUsage>80?"exception":""},null,8,["percentage","status"])]),_:1}),a(J,{label:"磁盘使用率"},{default:l(()=>[a(y,{percentage:h.value.diskUsage,status:h.value.diskUsage>80?"exception":""},null,8,["percentage","status"])]),_:1}),a(J,{label:"系统运行时间"},{default:l(()=>[o(p(h.value.uptime),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(ce,{span:12},{default:l(()=>[a(x,{class:"monitor-card"},{header:l(()=>[i("div",lt,[i("span",null,"在线用户 ("+p(Y.value.length)+")",1)])]),default:l(()=>[a(b,{data:Y.value,border:"",stripe:"",style:{width:"100%"}},{default:l(()=>[a(n,{prop:"account",label:"账号"}),a(n,{prop:"ip",label:"IP地址"}),a(n,{prop:"loginTime",label:"登录时间"},{default:l(({row:s})=>[o(p(T(s.loginTime)),1)]),_:1}),a(n,{label:"操作",width:"100"},{default:l(({row:s})=>[a(f,{link:"",type:"danger",onClick:q=>Ce(s)},{default:l(()=>t[23]||(t[23]=[o(" 强制下线 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),a(m,{label:"通知管理",name:"notifications"},{default:l(()=>[a(x,null,{header:l(()=>[i("div",st,[t[25]||(t[25]=i("span",null,"通知列表",-1)),a(f,{type:"primary",onClick:Ve},{default:l(()=>[a(v,null,{default:l(()=>[a(U(Ye))]),_:1}),t[24]||(t[24]=o(" 发送通知 "))]),_:1})])]),default:l(()=>[a(b,{data:se.value,border:"",stripe:"",style:{width:"100%"}},{default:l(()=>[a(n,{prop:"title",label:"标题","show-overflow-tooltip":""}),a(n,{prop:"create_time",label:"发送时间",width:"180"},{default:l(({row:s})=>[o(p(T(s.create_time)),1)]),_:1}),a(n,{prop:"recipients",label:"接收人",width:"150"},{default:l(({row:s})=>[s.recipients==="all"?(w(),P(k,{key:0,type:"success"},{default:l(()=>t[26]||(t[26]=[o("所有用户")])),_:1})):(w(),P(k,{key:1,type:"info"},{default:l(()=>[o("指定用户("+p(s.recipients.length)+"人)",1)]),_:2},1024))]),_:1}),a(n,{label:"已读情况",width:"150"},{default:l(({row:s})=>[a(y,{percentage:Math.round(s.read_count/s.total_recipients*100),format:oe,status:re(s.read_count,s.total_recipients)},null,8,["percentage","status"]),i("div",nt,p(s.read_count)+"/"+p(s.total_recipients),1)]),_:1}),a(n,{label:"操作",width:"200",fixed:"right"},{default:l(({row:s})=>[i("div",ot,[a(f,{size:"small",type:"primary",onClick:q=>qe(s),class:"action-btn"},{default:l(()=>[a(v,null,{default:l(()=>[a(U(Qe))]),_:1}),t[27]||(t[27]=o(" 查看 "))]),_:2},1032,["onClick"]),a(f,{size:"small",type:"danger",onClick:q=>Pe(s),class:"action-btn"},{default:l(()=>[a(v,null,{default:l(()=>[a(U(ae))]),_:1}),t[28]||(t[28]=o(" 删除 "))]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),i("div",rt,[a(M,{"current-page":F.value,"onUpdate:currentPage":t[2]||(t[2]=s=>F.value=s),"page-size":I.value,"onUpdate:pageSize":t[3]||(t[3]=s=>I.value=s),"page-sizes":[10,20,50,100],total:ne.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Se,onCurrentChange:Ae},null,8,["current-page","page-size","total"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(te,{modelValue:N.value,"onUpdate:modelValue":t[7]||(t[7]=s=>N.value=s),title:"重置密码",width:"400px","destroy-on-close":""},{footer:l(()=>[i("span",it,[a(f,{onClick:t[6]||(t[6]=s=>N.value=!1)},{default:l(()=>t[29]||(t[29]=[o("取消")])),_:1}),a(f,{type:"primary",onClick:be,loading:D.value},{default:l(()=>t[30]||(t[30]=[o(" 确认 ")])),_:1},8,["loading"])])]),default:l(()=>[a(pe,{ref_key:"resetPasswordFormEl",ref:L,model:C.value,rules:ve,"label-position":"top"},{default:l(()=>[a($,{label:"新密码",prop:"newPassword"},{default:l(()=>[a(ee,{modelValue:C.value.newPassword,"onUpdate:modelValue":t[5]||(t[5]=s=>C.value.newPassword=s),type:"password","show-password":"",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(te,{modelValue:B.value,"onUpdate:modelValue":t[13]||(t[13]=s=>B.value=s),title:"发送通知",width:"600px","destroy-on-close":""},{footer:l(()=>[i("span",ut,[a(f,{onClick:t[12]||(t[12]=s=>B.value=!1)},{default:l(()=>t[33]||(t[33]=[o("取消")])),_:1}),a(f,{type:"primary",onClick:ze,loading:j.value},{default:l(()=>t[34]||(t[34]=[o(" 发送 ")])),_:1},8,["loading"])])]),default:l(()=>[a(pe,{ref_key:"notificationFormRef",ref:H,model:c.value,rules:ye,"label-position":"top"},{default:l(()=>[a($,{label:"通知标题",prop:"title"},{default:l(()=>[a(ee,{modelValue:c.value.title,"onUpdate:modelValue":t[8]||(t[8]=s=>c.value.title=s),placeholder:"请输入通知标题",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),a($,{label:"接收人",prop:"recipientType"},{default:l(()=>[a(Oe,{modelValue:c.value.recipientType,"onUpdate:modelValue":t[9]||(t[9]=s=>c.value.recipientType=s)},{default:l(()=>[a(fe,{label:"all"},{default:l(()=>t[31]||(t[31]=[o("所有用户")])),_:1}),a(fe,{label:"selected"},{default:l(()=>t[32]||(t[32]=[o("指定用户")])),_:1})]),_:1},8,["modelValue"])]),_:1}),c.value.recipientType==="selected"?(w(),P($,{key:0,label:"选择用户",prop:"selectedUsers"},{default:l(()=>[a(Fe,{modelValue:c.value.selectedUsers,"onUpdate:modelValue":t[10]||(t[10]=s=>c.value.selectedUsers=s),multiple:"",filterable:"",placeholder:"请选择用户",style:{width:"100%"}},{default:l(()=>[(w(!0),Z(ge,null,_e(Q.value,s=>(w(),P(Ee,{key:s.account,label:s.account,value:s.account},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):me("",!0),a($,{label:"通知内容",prop:"content"},{default:l(()=>[a(ee,{modelValue:c.value.content,"onUpdate:modelValue":t[11]||(t[11]=s=>c.value.content=s),type:"textarea",rows:6,placeholder:"请输入通知内容",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(te,{modelValue:G.value,"onUpdate:modelValue":t[14]||(t[14]=s=>G.value=s),title:g.value?.title||"通知详情",width:"600px"},{default:l(()=>[g.value?(w(),Z("div",dt,[i("p",ct,[i("span",pt,"发送人: "+p(g.value.sender),1),i("span",ft,p(T(g.value.create_time)),1)]),i("p",mt,[t[36]||(t[36]=o(" 接收人: ")),g.value.recipients==="all"?(w(),P(k,{key:0,type:"success"},{default:l(()=>t[35]||(t[35]=[o("所有用户")])),_:1})):(w(!0),Z(ge,{key:1},_e(g.value.recipients,(s,q)=>(w(),P(k,{key:q,class:"recipient-tag"},{default:l(()=>[o(p(s),1)]),_:2},1024))),128))]),i("div",gt,p(g.value.content),1),i("div",_t,[i("p",null,"已读状态: "+p(g.value.read_count)+"/"+p(g.value.total_recipients),1),a(y,{percentage:Math.round(g.value.read_count/g.value.total_recipients*100),format:oe,status:re(g.value.read_count,g.value.total_recipients)},null,8,["percentage","status"])])])):me("",!0)]),_:1},8,["modelValue","title"])])}}},ht=Ie(vt,[["__scopeId","data-v-5e9cefd9"]]);export{ht as default};
